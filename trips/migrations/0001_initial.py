# Generated by Django 6.0 on 2026-01-06 21:35

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('activities', '0001_initial'),
        ('events', '0001_initial'),
        ('locations', '0001_initial'),
        ('vendors', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Trip',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('slug', models.SlugField(help_text='URL-friendly version of the name', max_length=255, unique=True)),
                ('title', models.CharField(help_text="Trip name (e.g., 'Summer 2024 Europe Tour')", max_length=200)),
                ('description', models.TextField(blank=True, help_text='Overview of the trip')),
                ('start_date', models.DateField(db_index=True)),
                ('end_date', models.DateField(db_index=True)),
                ('trip_type', models.CharField(choices=[('leisure', 'Leisure/Vacation'), ('adventure', 'Adventure'), ('business', 'Business'), ('volunteer', 'Volunteer'), ('pilgrimage', 'Pilgrimage'), ('education', 'Educational'), ('family', 'Family Visit'), ('honeymoon', 'Honeymoon'), ('solo', 'Solo Travel'), ('backpacking', 'Backpacking'), ('road_trip', 'Road Trip'), ('cruise', 'Cruise'), ('other', 'Other')], default='leisure', max_length=20)),
                ('status', models.CharField(choices=[('idea', 'Idea'), ('planning', 'Planning'), ('booked', 'Booked'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], db_index=True, default='planning', max_length=20)),
                ('estimated_budget', models.DecimalField(blank=True, decimal_places=2, help_text='Estimated total budget', max_digits=10, null=True)),
                ('actual_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Actual total cost', max_digits=10, null=True)),
                ('currency', models.CharField(default='USD', max_length=3)),
                ('traveler_count', models.IntegerField(default=1, help_text='Total number of travelers', validators=[django.core.validators.MinValueValidator(1)])),
                ('privacy', models.CharField(choices=[('private', 'Private'), ('friends', 'Friends Only'), ('public', 'Public')], default='private', max_length=20)),
                ('is_template', models.BooleanField(default=False, help_text='Whether this trip can be used as a template by others')),
                ('allow_collaborators', models.BooleanField(default=False, help_text='Allow others to collaborate on trip planning')),
                ('packing_list', models.JSONField(blank=True, default=list, help_text='List of items to pack')),
                ('pre_trip_checklist', models.JSONField(blank=True, default=list, help_text='Tasks to complete before trip')),
                ('notes', models.TextField(blank=True, help_text='General trip notes')),
                ('overall_rating', models.IntegerField(blank=True, help_text='Overall trip rating (1-5)', null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('trip_summary', models.TextField(blank=True, help_text='Summary/reflection after trip')),
                ('highlights', models.TextField(blank=True, help_text='Trip highlights')),
                ('day_count', models.IntegerField(default=0)),
                ('city_count', models.IntegerField(default=0)),
                ('activity_count', models.IntegerField(default=0)),
                ('booking_count', models.IntegerField(default=0)),
                ('view_count', models.IntegerField(default=0)),
                ('like_count', models.IntegerField(default=0)),
                ('clone_count', models.IntegerField(default=0, help_text='How many times copied as template')),
                ('countries', models.ManyToManyField(blank=True, help_text='Countries visited on this trip', related_name='trips', to='locations.country')),
                ('primary_destination', models.ForeignKey(blank=True, help_text='Main destination', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='primary_trips', to='locations.city')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='trips', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'trips',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='TripBooking',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('booking_type', models.CharField(choices=[('flight', 'Flight'), ('accommodation', 'Accommodation'), ('car_rental', 'Car Rental'), ('train', 'Train'), ('bus', 'Bus'), ('tour', 'Tour/Activity'), ('restaurant', 'Restaurant'), ('event', 'Event Ticket'), ('other', 'Other')], max_length=20)),
                ('title', models.CharField(help_text="E.g., 'Flight to Paris', 'Hotel Booking'", max_length=200)),
                ('description', models.TextField(blank=True)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField(blank=True, null=True)),
                ('start_time', models.TimeField(blank=True, null=True)),
                ('confirmation_number', models.CharField(blank=True, help_text='Confirmation/reference number', max_length=100)),
                ('booking_url', models.URLField(blank=True, help_text='Link to booking confirmation')),
                ('cost', models.DecimalField(decimal_places=2, help_text='Total cost', max_digits=10)),
                ('currency', models.CharField(default='USD', max_length=3)),
                ('payment_status', models.CharField(choices=[('unpaid', 'Unpaid'), ('deposit', 'Deposit Paid'), ('paid', 'Fully Paid'), ('refunded', 'Refunded')], default='unpaid', max_length=20)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('confirmed', 'Confirmed'), ('cancelled', 'Cancelled'), ('completed', 'Completed')], default='pending', max_length=20)),
                ('cancellation_policy', models.TextField(blank=True)),
                ('is_refundable', models.BooleanField(default=False)),
                ('cancellation_deadline', models.DateTimeField(blank=True, null=True)),
                ('contact_name', models.CharField(blank=True, max_length=200)),
                ('contact_phone', models.CharField(blank=True, max_length=20)),
                ('contact_email', models.EmailField(blank=True, max_length=254)),
                ('notes', models.TextField(blank=True)),
                ('attachment_urls', models.JSONField(blank=True, default=list, help_text='URLs to attached documents')),
                ('trip', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bookings', to='trips.trip')),
                ('vendor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bookings', to='vendors.vendor')),
            ],
            options={
                'db_table': 'trip_bookings',
                'ordering': ['trip', 'start_date', 'start_time'],
            },
        ),
        migrations.CreateModel(
            name='TripCollaborator',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('role', models.CharField(choices=[('viewer', 'Viewer'), ('editor', 'Editor'), ('co_owner', 'Co-Owner')], default='viewer', max_length=20)),
                ('invitation_accepted', models.BooleanField(default=False)),
                ('invitation_date', models.DateTimeField(auto_now_add=True)),
                ('accepted_date', models.DateTimeField(blank=True, null=True)),
                ('invited_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='trip_invitations_sent', to=settings.AUTH_USER_MODEL)),
                ('trip', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='collaborators', to='trips.trip')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='collaborative_trips', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'trip_collaborators',
                'ordering': ['trip', '-role'],
            },
        ),
        migrations.CreateModel(
            name='TripDay',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('date', models.DateField(db_index=True)),
                ('day_number', models.IntegerField(help_text='Day 1, Day 2, etc.')),
                ('title', models.CharField(blank=True, help_text="E.g., 'Exploring Old Town', 'Beach Day'", max_length=200)),
                ('notes', models.TextField(blank=True, help_text='Notes for this day')),
                ('estimated_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('actual_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('weather_forecast', models.JSONField(blank=True, default=dict, help_text='Weather data for this day')),
                ('accommodation', models.ForeignKey(blank=True, limit_choices_to={'vendor_type__category__name': 'Accommodation'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='trip_days', to='vendors.vendor')),
                ('city', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='trip_days', to='locations.city')),
                ('trip', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='days', to='trips.trip')),
            ],
            options={
                'db_table': 'trip_days',
                'ordering': ['trip', 'date'],
            },
        ),
        migrations.CreateModel(
            name='TripActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('custom_title', models.CharField(blank=True, help_text='For activities not in catalog', max_length=200)),
                ('custom_description', models.TextField(blank=True)),
                ('start_time', models.TimeField(blank=True, null=True)),
                ('end_time', models.TimeField(blank=True, null=True)),
                ('duration_minutes', models.IntegerField(blank=True, help_text='Expected duration', null=True)),
                ('location_name', models.CharField(blank=True, max_length=200)),
                ('address', models.CharField(blank=True, max_length=300)),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True)),
                ('booking_required', models.BooleanField(default=False)),
                ('booking_reference', models.CharField(blank=True, max_length=100)),
                ('booking_status', models.CharField(choices=[('none', 'Not Required'), ('needed', 'Booking Needed'), ('pending', 'Pending'), ('confirmed', 'Confirmed'), ('cancelled', 'Cancelled')], default='none', max_length=20)),
                ('cost', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('is_confirmed', models.BooleanField(default=False)),
                ('is_completed', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True)),
                ('display_order', models.IntegerField(default=0, help_text='Order of activities in the day')),
                ('user_rating', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('review_notes', models.TextField(blank=True, help_text='Personal review after completing')),
                ('activity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='trip_activities', to='activities.activity')),
                ('event', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='trip_activities', to='events.event')),
                ('vendor', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='trip_activities', to='vendors.vendor')),
                ('trip_day', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activities', to='trips.tripday')),
            ],
            options={
                'verbose_name_plural': 'Trip Activities',
                'db_table': 'trip_activities',
                'ordering': ['trip_day', 'start_time', 'display_order'],
            },
        ),
        migrations.CreateModel(
            name='TripExpense',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('category', models.CharField(choices=[('accommodation', 'Accommodation'), ('food', 'Food & Dining'), ('transportation', 'Transportation'), ('activities', 'Activities & Tours'), ('shopping', 'Shopping'), ('entertainment', 'Entertainment'), ('miscellaneous', 'Miscellaneous')], max_length=20)),
                ('description', models.CharField(max_length=200)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('currency', models.CharField(default='USD', max_length=3)),
                ('date', models.DateField()),
                ('payment_method', models.CharField(blank=True, help_text='Credit card, cash, etc.', max_length=50)),
                ('receipt_photo', models.ImageField(blank=True, null=True, upload_to='receipts/%Y/%m/')),
                ('notes', models.TextField(blank=True)),
                ('trip', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='expenses', to='trips.trip')),
                ('trip_day', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='expenses', to='trips.tripday')),
            ],
            options={
                'db_table': 'trip_expenses',
                'ordering': ['trip', 'date'],
            },
        ),
        migrations.AddIndex(
            model_name='trip',
            index=models.Index(fields=['user', 'status'], name='trips_user_id_0bc744_idx'),
        ),
        migrations.AddIndex(
            model_name='trip',
            index=models.Index(fields=['start_date', 'end_date'], name='trips_start_d_518e71_idx'),
        ),
        migrations.AddIndex(
            model_name='trip',
            index=models.Index(fields=['status', '-start_date'], name='trips_status_8387d1_idx'),
        ),
        migrations.AddIndex(
            model_name='tripbooking',
            index=models.Index(fields=['trip', 'booking_type'], name='trip_bookin_trip_id_7fa202_idx'),
        ),
        migrations.AddIndex(
            model_name='tripbooking',
            index=models.Index(fields=['start_date'], name='trip_bookin_start_d_95746f_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='tripcollaborator',
            unique_together={('trip', 'user')},
        ),
        migrations.AddIndex(
            model_name='tripday',
            index=models.Index(fields=['trip', 'date'], name='trip_days_trip_id_cfe539_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='tripday',
            unique_together={('trip', 'date')},
        ),
    ]
