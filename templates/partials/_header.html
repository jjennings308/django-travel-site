{% load static %}
{# templates/partials/_header.html #}
<header class="site-header border-bottom">
  <div class="container py-2">
    <div class="d-flex align-items-center justify-content-between">

      {# Left: Sidebar toggle + Branding #}
      <div class="d-flex align-items-center gap-3">
        {# Sidebar toggle button #}
        <button class="btn btn-link text-dark d-lg-none p-0"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#mobileSidebar"
          aria-controls="mobileSidebar"
          aria-label="Open navigation">
          <i class="bi bi-list fs-4"></i>
        </button>

        {# Simplified branding - logo + name only #}
        <div class="branding">
          <a href="{% url 'core:home' %}" class="site-title navbar-brand d-flex align-items-center text-decoration-none">

            <img
              src="{% static 'core/branding/png/sbl-logo-navbar-600x120.png' %}"
              alt="{{ SITE_NAME }}"
              class="navbar_logo"
              loading="eager"
            >
            <span class="visually-hidden">{{ SITE_NAME }}</span>
          </a>
        </div>

      {# Right: Minimal user controls #}
      <div class="d-flex align-items-center gap-2">
        {% if user.is_authenticated %}
          
          {# Admin link if staff #}
          {% if user.is_staff %}
            <a href="{% url 'admin:index' %}" class="btn btn-sm btn-link text-muted" title="Admin">
              <i class="bi bi-shield-lock"></i>
            </a>
          {% endif %}

          {# User dropdown - icon only on mobile #}
          <div class="dropdown">
            <button class="btn btn-link text-dark p-1" type="button" 
                    id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-person-circle fs-4"></i>
              <span class="d-none d-md-inline ms-1">{{ user.username }}</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              <li><a class="dropdown-item" href="{% url 'profile' %}">
                <i class="bi bi-person"></i> Profile
              </a></li>
              <li><a class="dropdown-item" href="{% url 'settings' %}">
                <i class="bi bi-gear"></i> Settings
              </a></li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <form method="post" action="{% url 'logout' %}" class="m-0">
                  {% csrf_token %}
                  <button type="submit" class="dropdown-item">
                    <i class="bi bi-box-arrow-right"></i> Logout
                  </button>
                </form>
              </li>
            </ul>
          </div>

        {% else %}
          {# Not logged in - simplified #}
          <a class="btn btn-sm btn-outline-primary" href="{% url 'login' %}">Login</a>
          <a class="btn btn-sm btn-primary" href="{% url 'register' %}">Sign Up</a>
        {% endif %}
      </div>

    </div>
  </div>
</header>