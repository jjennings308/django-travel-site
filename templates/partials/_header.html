{% load static %}
{# templates/partials/_header.html #}
<header class="site-header border-bottom">
  <div class="container py-2">
    <div class="d-flex align-items-center justify-content-between">

      {# Left: Branding #}
      <div class="branding">
        <a href="{% url 'core:home' %}" class="site-title navbar-brand d-flex align-items-center text-decoration-none mb-0">
          <img
            src="{% static 'core/branding/png/sbl-logo-navbar-600x120.png' %}"
            alt="{{ SITE_NAME }}"
            class="navbar_logo"
            loading="eager"
          >
          <span class="visually-hidden">{{ SITE_NAME }}</span>
        </a>
      </div>

      {# Right: User controls #}
      <div class="d-flex align-items-center gap-2">
        {% if user.is_authenticated %}
          
          {# Quick nav links - shown on larger screens #}
          <nav class="d-none d-lg-flex align-items-center gap-2 me-2">
            <a href="{% url 'core:dashboard' %}" class="btn btn-sm btn-link text-muted" title="Dashboard">
              <i class="bi bi-speedometer2"></i>
              <span class="ms-1 d-none d-xl-inline">Dashboard</span>
            </a>
            <a href="{% url 'bucketlists:dashboard' %}" class="btn btn-sm btn-link text-muted" title="Bucket List">
              <i class="bi bi-list-check"></i>
              <span class="ms-1 d-none d-xl-inline">Bucket List</span>
            </a>
            <a href="{% url 'trips:dashboard' %}" class="btn btn-sm btn-link text-muted" title="Trips">
              <i class="bi bi-airplane"></i>
              <span class="ms-1 d-none d-xl-inline">Trips</span>
            </a>
          </nav>
          
          {# Admin link if staff #}
          {% if user.is_staff %}
            <a href="{% url 'admin:index' %}" class="btn btn-sm btn-link text-muted p-1" title="Admin">
              <i class="bi bi-shield-lock"></i>
            </a>
          {% endif %}

          {# User dropdown #}
          <div class="dropdown">
            <button class="btn btn-link text-dark p-1 d-flex align-items-center" type="button" 
                    id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-person-circle fs-4"></i>
              <span class="d-none d-md-inline ms-2">{{ user.username }}</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              {# Mobile-only nav links in dropdown #}
              <li class="d-lg-none"><a class="dropdown-item" href="{% url 'core:dashboard' %}">
                <i class="bi bi-speedometer2 me-2"></i>Dashboard
              </a></li>
              <li class="d-lg-none"><a class="dropdown-item" href="{% url 'bucketlists:dashboard' %}">
                <i class="bi bi-list-check me-2"></i>Bucket List
              </a></li>
              <li class="d-lg-none"><a class="dropdown-item" href="{% url 'trips:dashboard' %}">
                <i class="bi bi-airplane me-2"></i>Trips
              </a></li>
              <li class="d-lg-none"><a class="dropdown-item" href="{% url 'activities:dashboard' %}">
                <i class="bi bi-signpost-2 me-2"></i>Activities
              </a></li>
              <li class="d-lg-none"><a class="dropdown-item" href="{% url 'locations:dashboard' %}">
                <i class="bi bi-geo-alt me-2"></i>Locations
              </a></li>
              <li class="d-lg-none"><hr class="dropdown-divider"></li>
              
              {# Standard user menu items #}
              <li><a class="dropdown-item" href="{% url 'profile' %}">
                <i class="bi bi-person me-2"></i>Profile
              </a></li>
              <li><a class="dropdown-item" href="{% url 'settings' %}">
                <i class="bi bi-gear me-2"></i>Settings
              </a></li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <form method="post" action="{% url 'logout' %}" class="m-0">
                  {% csrf_token %}
                  <button type="submit" class="dropdown-item">
                    <i class="bi bi-box-arrow-right me-2"></i>Logout
                  </button>
                </form>
              </li>
            </ul>
          </div>

        {% else %}
          {# Not logged in #}
          <a class="btn btn-sm btn-outline-primary me-1" href="{% url 'login' %}">Login</a>
          <a class="btn btn-sm btn-primary" href="{% url 'register' %}">Sign Up</a>
        {% endif %}
      </div>

    </div>
  </div>
</header>
