<!-- templates/accounts/profile.html -->
{% extends 'base.html' %}

{% block title %}{{ profile_user.get_full_name }}'s Profile{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Cover Photo -->
    <div class="row">
        <div class="col-md-12">
            <div class="card mb-3">
                {% if profile.cover_photo %}
                    <img src="{{ profile.cover_photo.url }}" class="card-img-top" alt="Cover Photo" style="max-height: 300px; object-fit: cover;">
                {% else %}
                    <div class="bg-secondary" style="height: 200px;"></div>
                {% endif %}
                
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-2 text-center">
                            {% if profile.avatar %}
                                <img src="{{ profile.avatar.url }}" class="rounded-circle" alt="Avatar" style="width: 120px; height: 120px; object-fit: cover; margin-top: -60px; border: 3px solid white;">
                            {% else %}
                                <div class="rounded-circle bg-primary d-inline-flex align-items-center justify-content-center text-white" style="width: 120px; height: 120px; margin-top: -60px; border: 3px solid white; font-size: 48px;">
                                    {{ profile_user.first_name.0 }}{{ profile_user.last_name.0 }}
                                </div>
                            {% endif %}
                        </div>
                        <div class="col-md-8">
                            <h2>{{ profile_user.get_full_name }}</h2>
                            <p class="text-muted">{{ profile_user.username }}</p>
                            {% if profile.home_city or profile.home_country %}
                                <p><i class="bi bi-geo-alt"></i> {{ profile.home_city }}{% if profile.home_city and profile.home_country %}, {% endif %}{{ profile.home_country }}</p>
                            {% endif %}
                            {% if profile.current_location %}
                                <p><i class="bi bi-pin-map"></i> Currently in: {{ profile.current_location }}</p>
                            {% endif %}
                        </div>
                        <div class="col-md-2 text-end">
                            {% if is_own_profile %}
                                <a href="{% url 'edit_profile' %}" class="btn btn-primary">Edit Profile</a>
                                <a href="{% url 'edit_preferences' %}" class="btn btn-secondary mt-2">Preferences</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <!-- Left Column -->
        <div class="col-md-4">
            <!-- Bio -->
            <div class="card mb-3">
                <div class="card-body">
                    <h5>About</h5>
                    <p>{{ profile.bio|default:"No bio yet." }}</p>
                </div>
            </div>
            
            <!-- Stats -->
            <div class="card mb-3">
                <div class="card-body">
                    <h5>Travel Stats</h5>
                    <ul class="list-unstyled">
                        <li><strong>Countries Visited:</strong> {{ profile.countries_visited_count }}</li>
                        <li><strong>Trips Completed:</strong> {{ profile.trips_completed_count }}</li>
                        <li><strong>Bucket List Items:</strong> {{ profile.bucket_list_completed_count }}</li>
                    </ul>
                </div>
            </div>
            
            <!-- Social Links -->
            {% if profile.website or profile.instagram or profile.twitter %}
            <div class="card mb-3">
                <div class="card-body">
                    <h5>Connect</h5>
                    {% if profile.website %}
                        <p><a href="{{ profile.website }}" target="_blank">üåê Website</a></p>
                    {% endif %}
                    {% if profile.instagram %}
                        <p><a href="https://instagram.com/{{ profile.instagram }}" target="_blank">üì∑ Instagram</a></p>
                    {% endif %}
                    {% if profile.twitter %}
                        <p><a href="https://twitter.com/{{ profile.twitter }}" target="_blank">üê¶ Twitter</a></p>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </div>
        
        <!-- Right Column - Activity Feed -->
        <div class="col-md-8">
            <div class="card">
                <div class="card-body">
                    <h5>Recent Activity</h5>
                    <p class="text-muted">Activity feed coming soon...</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
